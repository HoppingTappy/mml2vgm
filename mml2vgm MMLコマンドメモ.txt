mml2vgm MMLコマンドメモ
元ネタ: MUSIC LALF MMLコマンドメモ


■ .vgmファイル作成手順

 1. 元になるMMLファイルを作成する。
   (1) mml2vgmでは拡張子を便宜上.gwiとしています
   (2) UTF-8 BOM付き(改行はCRLF)
 
 2. エクスプローラなどで、mml2vgm.exeのアイコンの上に1で作成したファイルをD&Dする。
 又は、コマンドラインから、「mml2vgm.exe ファイル名」と打ち込む。
 
 3. コンパイルが実行され、エラーやワーニング、例外が表示される。
 又は、エラー無く無事に.vgmファイルが.gwiと同じフォルダーに生成される。
 
 4. 手頃なvgmプレイヤーで試聴する。修正が必要であれば1から繰り返す。
 
 5. 完成！悦に入る。
 


■ パート割り(初期値)
　F1     YM2612(FM音源)   1Ch
　F2     YM2612(FM音源)   2Ch
　F3     YM2612(FM音源)   3Ch/3ChEx0
　F4     YM2612(FM音源)   4Ch
　F5     YM2612(FM音源)   5Ch
　F6     YM2612(FM音源)   6Ch(PCM)
　F7     YM2612(FM音源)   3ChEx1
　F8     YM2612(FM音源)   3ChEx2
　F9     YM2612(FM音源)   3ChEx3
　S1     SN76489(SSG音源) 1Ch
　S2     SN76489(SSG音源) 2Ch
　S3     SN76489(SSG音源) 3Ch
　S4     SN76489(SSG音源) 4Ch(ノイズ)
　R1     RF5C164(PCM音源) 1Ch
　R2     RF5C164(PCM音源) 2Ch
　R3     RF5C164(PCM音源) 3Ch
　R4     RF5C164(PCM音源) 4Ch
　R5     RF5C164(PCM音源) 5Ch
　R6     RF5C164(PCM音源) 6Ch
　R7     RF5C164(PCM音源) 7Ch
　R8     RF5C164(PCM音源) 8Ch


■ MML内部

 凡例
  Y YM2612
  E YM2612(3ChEx)
  P YM2612(6ChPCMmode)
  S SN76489
  R RF5C164
  
  o 対応
  - 非対応
  * 未実装

コマンド		YEPSR		内容
-------------------------------------------------
ln				ooooo		デフォルト音長指定
on				ooooo		オクターブ絶対指定(1 - 8)(YM2612PCMのみ3 - 5)
Dn				ooooo		ディチューン (範囲未チェック)絶対指定のみ
vn				oo-oo		音量絶対指定(Y/E:0-127 S:0-15 R:0-255)
@n				ooo-o		音色番号指定(F/E/R)
@n				---o-		エンベロープ番号指定
@En				----o		エンベロープ番号指定
>				ooooo		オクターブ相対指定(上げ)
<				ooooo		オクターブ相対指定(下げ)
)n				ooooo		音量相対指定(上げ) 16段階
(n				ooooo		音量相対指定(下げ) 16段階
&				ooooo		タイ(但し、音符の装飾扱いなので音符の直後に指定する必要あり)
yn,n			oooo*		レジスタ直接書き込み(yn1,n2) n1=レジスタ番号 n2=データ
Mx1x2n,...		oo-oo		ソフトウェアLFO(
							x1:P/Q/R/S		識別子(1チャンネル当たり4種類定義、使用できる)
							x2:T/V/H		T:音量 V:音程 H:ハードウェアLFO(YM2612のみ)
							n...:パラメーター)基本的にはFMPと同じ
Sx1n			oo-oo		ソフトウェアLFOスイッチ(x1:P/Q/R/S n:0(OFF)/1(ON))
rn				ooooo		休符
[				ooooo		ループ開始位置
]n				ooooo		ループ終了位置
/				ooooo		ループ脱出位置指定
EON				---oo		エンベロープの開始
EOF				---oo		エンベロープの停止
EON				oo---		効果音モードの開始
EOF				oo---		効果音モードの停止
EXn				oo---		効果音モードのスロット割り当て
En1,n2,n3,n4	oo---		効果音モードのスロットディチューンn1～n4はそれぞれOP1～OP4までのディチューン値
Ln				ooooo		曲全体のループ位置指定
qn				ooooo		ゲートタイム指定(クロック数で指定)
Qn				ooooo		ゲートタイム指定割合(1-8で指定)
wn				---o-		ノイズモード指定(0～7)
mn				ooo--		YM2612PCMモード指定(0:停止 1:開始)
Tn				ooooo		テンポ(1-255)
!				ooooo		このパートのこれ以降をコンパイルしない(発音しない)
Kn				ooooo		移調絶対指定 (-12～+12)
#n				ooooo		音長をクロック値で指定
pn				o-o--		パン (0=発音しない, 1=右, 2=左, 3=中央)
pn1,n2			----o		パン (0-15)n1:左　n2:右
%xxx			ooooo		エイリアス展開

c				ooooo		音符ド
d				ooooo		音符レ
e				ooooo		音符ミ
f				ooooo		音符ファ
g				ooooo		音符ソ
a				ooooo		音符ラ
b				ooooo		音符シ
	+/-			ooooo		半音上げる/下げる
	n			ooooo		音長
	.			ooooo		符点
	_			oo-oo		ベンド
		音符	oo-oo		音符(c-b)
		o		oo-oo		オクターブ
		>		oo-oo		オクターブ相対指定(上げ)
		<		oo-oo		オクターブ相対指定(下げ)
	&			ooooo		タイ
	~			ooooo		タイの逆


■ 音色定義

※パラメータの区切りは基本、','だが数字でなければなんでもよい
※パラメータは$を付けることで16進数で指定可


FM音源音色定義1

'@ F No
'@ AR DR SR RR SL TL KS ML DT
'@ AR DR SR RR SL TL KS ML DT
'@ AR DR SR RR SL TL KS ML DT
'@ AR DR SR RR SL TL KS ML DT
'@ AL FB


FM音源音色定義2

'@ M No
'@ AR DR SR RR SL TL KS ML DT AM SSGEG
'@ AR DR SR RR SL TL KS ML DT AM SSGEG
'@ AR DR SR RR SL TL KS ML DT AM SSGEG
'@ AR DR SR RR SL TL KS ML DT AM SSGEG
'@ AL FB


PCM音源音色定義

'@ P No , "FileName" , Freq , Volume ( , ChipName , LoopPoint )
	No			定義番号(0-255)
	FileName	ファイル名(同じパス)
	Freq		周波数(未使用)
	Volume		音量(0- )元の音量に値(%)を掛ける。100以上も指定できるが音が割れるのでお勧めできない
	ChipName	YM2612 | RF5C164 省略時はYM2612として定義される
	LoopPoint	RF5C164の場合の、ループ再生位置をサンプル数で指定。


エンベロープ定義

'@ E No , SV , AR , DR , SL , SR , RR , ST , ChipName
	No			定義番号(0-255)
	SV			キーオン時のボリューム(0 - 15 | 0 - 255 まで)
	AR			次にボリュームを+STするまでのクロック数。
				(最大ボリューム(15 | 255)になるまで発音ボリュームを+STする処理を繰り返す。)
	DR			次にボリュームを-STするまでのクロック数。(SLになるまで発音ボリュームを-STする処理を繰り返す。)
	SL			最大ボリューム後の減衰ボリューム(0 - 15 | 0 - 255 まで)
	SR			次にボリュームを-STするまでのクロック数。
				(ボリュームがSLに到達後、0になるまで発音ボリュームを-STする処理を繰り返す。)
	RR			キーオフ後、次にボリュームを-STするまでのクロック数。
				(0になるまで発音ボリュームを-STする処理を繰り返す。)
	ST			ボリュームの変化量
	ChipName	SN76489 | RF5C164 省略時はSN76489として定義される


■ エイリアス定義

'%xxx yyyyyy
	xxx			エイリアス名
	yyyyyy		通常のMML(無限再帰にならないように注意してください)


■ 曲情報定義

	TitleName				タイトル
	TitleNameJ				タイトル(日本名)
	GameName				ゲーム名
	GameNameJ				ゲーム名(日本名)
	SystemName				システム名
	SystemNameJ				システム名(日本名)
	Composer				作曲者
	ComposerJ				作曲者(日本名)
	ReleaseDate				リリース日
	Converted				コンバーター
	Notes					メモ

	PartYM2612				YM2612のパート名
	PartYM2612Ch3			YM2612(Ch3|Ch3Ex)のパート名
	PartYM2612Ch6			YM2612(Ch6)のパート名
	ForcedMonoPartYM2612	指定したパートの定位を強制的に中央のみにする。
	PartSN76489				SN76489のパート名
	PartRf5c164				RF5C164のパート名
	ClockCount				クロックカウント値
    FmF-Num					FM音源のF-Num値再定義
    PsgF-Num				PSG音源のF-Num値再定義


